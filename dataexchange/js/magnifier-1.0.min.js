!function($,i,t,e){function s(i,t){this.$element=i,this.defaults={multiple:2,bgColor:"rgba(0,0,0,0.3)",shadeName:"shade",bigImgName:"bigName",index:0,time:200},this.options=$.extend({},this.defaults,t),this.canShow=this.$element.children("img").attr("data-show"),this.imgUrl=this.$element.children("img").attr("src"),this.prependSting='<div class="'+this.options.shadeName+'"></div>',this.appendSting='<div class="'+this.options.bigImgName+'"><img src="'+this.imgUrl+'" alt="" style="position:absolute;"></div>',this.height=this.$element.innerHeight(),this.width=this.$element.innerWidth(),this.offsetLeft=this.$element.offset().left,this.offsetTop=this.$element.offset().top}s.prototype.init=function(){this.$element.css("position","relative").prepend(this.prependSting).append(this.appendSting).find("."+this.options.shadeName).css({display:"none","background-color":this.options.bgColor,position:"absolute",height:this.height/this.options.multiple+"px",width:this.width/this.options.multiple+"px",cursor:"move"}).end().find("."+this.options.bigImgName).css({display:"none",overflow:"hidden",position:"absolute",left:+this.width+20+"px",top:0,height:this.height+"px",width:this.width+"px"}),this.$shadeEle=$("."+this.options.shadeName),this.$bigImgEle=$("."+this.options.bigImgName),this.$bigImgEle.children("img").css({width:this.width*this.options.multiple+"px",height:this.height*this.options.multiple+"px"}),this.show()},s.prototype.show=function(){var i=this;this.$element.on("mouseenter",function(){i.canShow=$(this).children("img").attr("data-show"),"false"!=i.canShow&&(i.options.index=setTimeout(function(){i.imgUrl=i.$element.children("img").attr("src"),i.$bigImgEle.children("img").attr("src",i.imgUrl),i.$shadeEle.css("display","block"),i.$bigImgEle.css("display","block")},i.options.time))}),this.$element.on("mouseleave",function(){clearTimeout(i.options.index),i.$shadeEle.css("display","none"),i.$bigImgEle.css("display","none")}),this.$element.on("mousemove",function(t){var e=0,s=0;e=t.pageX-i.offsetLeft-i.width/(2*i.options.multiple),s=t.pageY-i.offsetTop-i.height/(2*i.options.multiple),e<=0?e=0:e>=i.width-i.width/i.options.multiple&&(e=i.width-i.width/i.options.multiple),s<=0?s=0:s>=i.height-i.height/i.options.multiple&&(s=i.height-i.height/i.options.multiple),i.$shadeEle.css({left:e,top:s}),i.$bigImgEle.find("img").css({left:-e*i.options.multiple,top:-s*i.options.multiple})}),this.$bigImgEle.on("mouseover",function(){i.$element.trigger("mouseleave")})},$.fn.magnifier=function(i){return new s(this,i).init(),this}}(jQuery,window,document);