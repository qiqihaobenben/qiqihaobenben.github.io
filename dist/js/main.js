function pageOneCavans(){function e(){if(g){f.clearRect(0,0,s,c);for(var e in u)Math.abs(r(u[e],d))<4e3?(u[e].active=.3,u[e].Circle.active=.6):Math.abs(r(u[e],d))<2e4?(u[e].active=.1,u[e].Circle.active=.3):Math.abs(r(u[e],d))<4e4?(u[e].active=.02,u[e].Circle.active=.1):(u[e].active=0,u[e].Circle.active=0),o(u[e]),u[e].Circle.draw()}}function n(e){TweenLite.to(e,1+1*Math.random(),{x:e.originX-50+100*Math.random(),y:e.originY-50+100*Math.random(),ease:Tween.easeInOut,onComplete:function(){n(e)}})}function t(e){var n=cury=0;e.pageX?(n=e.pageX,cury=e.pageY):e.clientX&&(n=e.clientX,cury=e.clientY),d.x=n,d.y=cury}function a(){g=0==nub}function i(){s=window.innerWidth,c=window.innerHeight,m.width=s,m.height=c}function o(e){if(e.active){f.beginPath();for(var n in e.closest)f.moveTo(e.x,e.y),f.lineTo(e.closest[n].x,e.closest[n].y),f.strokeStyle="rgba(226,252,236,"+e.active+")",f.stroke()}}function l(e,n){this.position=e||0,this.radius=n||0,this.draw=function(){this.active&&(f.beginPath(),f.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI,!1),f.fillStyle="rgba(226,252,236,"+this.active+")",f.fill())}}function r(e,n){return Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)}var s,c,m,f,u,d,g=!0;!function(){s=window.innerWidth,c=window.innerHeight,d={x:s/2,y:c/2},(m=document.getElementById("oneCanvas")).width=s,m.height=c,f=m.getContext("2d"),u=[];for(var e=0;e<s;e+=s/20)for(var n=0;n<c;n+=c/20){var t=e+Math.ceil(Math.random()*s/20),a=n+Math.ceil(Math.random()*c/20);u.push({x:t,originX:t,y:a,originY:a})}for(y=0;y<u.length;y++){for(var i=[],o=u[y],g=0;g<u.length;g++){var v=u[g];if(o!=v){for(var p=!1,h=0;h<5;h++)p||i[h]||(i[h]=v,p=!0);for(h=0;h<5;h++)p||r(o,v)<r(o,i[h])&&(i[h]=v,p=!0)}}o.closest=i}for(var y in u){var x=new l(u[y],2*Math.random()*2);u[y].Circle=x}}(),function(){clearInterval(oneTimer),oneTimer=setInterval(e,100);for(var t in u)n(u[t])}(),pageOne.addEventListener("mousemove",t),addWheel(main,function(e){a()}),window.addEventListener("resize",i)}function pageThree(){var e=!0,n=document.getElementById("pageThree"),t=document.getElementById("listBox"),a=n.children;console.log(a.length);for(var i=document.getElementsByClassName("p1")[0],o=document.getElementsByClassName("p2")[0],l=document.getElementsByClassName("p3")[0],r=document.getElementsByClassName("p4")[0],s=document.getElementsByClassName("p5")[0],c=document.getElementsByClassName("p6")[0],m=document.getElementsByClassName("p7")[0],f=document.getElementsByClassName("p8")[0],u=window.innerWidth,d=window.innerHeight,g=t.getElementsByTagName("li"),v=[10,30,50,70],p=0;p<a.length-1;p++){var h=a[p].offsetLeft,y=a[p].offsetTop;console.log(y),a[p].style.right=0,a[p].style.left=h+"px",a[p].style.top=y+"px",a[p].indexW=h,a[p].indexH=y}n.onmousemove=function(n){var a=window.event||n,g=.5-a.clientX/u,p=.5-a.clientY/d;i.style.left=parseFloat(i.indexW)+v[3]*g+"px",i.style.top=parseFloat(i.indexH)+v[3]*p+"px",o.style.left=parseInt(o.indexW)+v[1]*g+"px",o.style.top=parseInt(o.indexH)+v[1]*p+"px",l.style.left=parseInt(l.indexW)+v[0]*g+"px",l.style.top=parseInt(l.indexH)+v[0]*p+"px",r.style.left=parseInt(r.indexW)+v[1]*g+"px",r.style.top=parseInt(r.indexH)+v[1]*p+"px",s.style.left=parseInt(s.indexW)+v[1]*g+"px",s.style.top=parseInt(s.indexH)+v[1]*p+"px",c.style.left=parseInt(c.indexW)+v[2]*g+"px",c.style.top=parseInt(c.indexH)+v[2]*p+"px",m.style.left=parseInt(m.indexW)+v[3]*g+"px",m.style.top=parseInt(m.indexH)+v[3]*p+"px",f.style.left=parseInt(f.indexW)+v[1]*g+"px",f.style.top=parseInt(f.indexH)+v[1]*p+"px",e&&(t.style.transform="rotateX("+v[1]*p/2+"deg) rotateY("+v[0]*g+"deg)")},t.onmousemove=function(){e=!1,t.style.transform="rotateX(0deg) rotateY(0deg)"},t.onmouseout=function(){e=!0};for(p=0;p<g.length;p++)g[p].onmouseenter=function(){this.style.background="red",this.style.transform="scale(1.1)",this.style.boxShadow="0 0 20px #333"},g[p].onmouseleave=function(){this.style.background="",this.style.transform="",this.style.boxShadow=""}}function pageFour(){var e=document.getElementById("pageFour").getElementsByClassName("content")[0],n=e.getElementsByTagName("p"),t="电话：13522216755 Email: chenfangxu_qixin@163.com 地址：北京海淀区圆明园东里社区",a=null,i=-1,o={element:e,time:500,target:{opacity:100,bottom:-230},type:"easeBoth",callBack:function(){off&&(off=!1,a=setInterval(function(){++i>=t.indexOf("地")?n[2].innerHTML+=t.charAt(i):i>=t.indexOf("E")?n[1].innerHTML+=t.charAt(i):n[0].innerHTML+=t.charAt(i),i==t.length&&clearInterval(a)},50))}},l={element:document.getElementsByClassName("call")[0],time:500,target:{opacity:100,top:0},type:"elasticOut",callBack:function(){cTween(o)}};cTween(l)}function scrollCheck(){animateOff=0==nub}function addWheel(e,n){function t(e){var t=!0;e.wheelDelta?t=e.wheelDelta>0:e.detail&&(t=e.detail<0),"function"==typeof n&&n(t),e.preventDefault()}-1!=window.navigator.userAgent.toLowerCase().indexOf("firefox")?e.addEventListener("DOMMouseScroll",t):e.addEventListener("mousewheel",t)}function windowResize(){mainHeight=document.documentElement.clientHeight;for(var e=0;e<pageAll.length;e++)pageAll[e].style.height=mainHeight+"px";main.style.height=mainHeight+"px",main.style.top=-nub*mainHeight+"px"}function pageScroll(e){var n={element:e,time:500,target:{top:-nub*mainHeight},type:"easeOut",callBack:function(){rotate(0,-1,!1),pnub=1,pageOff=!0,changePages(),changeBg()}};cTween(n)}function rotate(e,n,t){var a=null;a=setInterval(function(){num+=n,headerBox.style.transform="rotateX("+num+"deg)",t?num>=e&&(headerBox.style.transform="rotateX("+e+"deg)",clearInterval(a)):num<=e&&(headerBox.style.transform="rotateX("+e+"deg)",clearInterval(a),mainOff=!0,0==nub?pageOneCavans():2==nub?pageThree():3==nub&&pageFour())},30)}function navHover(e){for(var n=0;n<navLink.length;n++)navLink[n].id="";var t;switch(e.target.dataset.index){case"0":t=navLink[0].offsetLeft,navLink[0].id="hover",navLine.style.left=t+"px";break;case"1":t=navLink[1].offsetLeft,navLink[1].id="hover",navLine.style.left=t+"px";break;case"2":t=navLink[2].offsetLeft,navLink[2].id="hover",navLine.style.left=t+"px";break;case"3":t=navLink[3].offsetLeft,navLink[3].id="hover",navLine.style.left=t+"px";break;default:t=navLink[0].offsetLeft,navLink[0].id="hover",navLine.style.left=t+"px"}}function navOut(){for(var e=0;e<navLink.length;e++)navLink[e].id="";var n=navLink[nub].offsetLeft;navLink[nub].id="hover",navLine.style.left=n+"px"}function navLineScroll(){for(var e=0;e<navLink.length;e++)navLink[e].id="";var n=navLink[nub].offsetLeft;navLink[nub].id="hover",navLine.style.left=n+"px"}function navLinkClick(){nub!=this.dataset.index&&(nub=this.dataset.index,navLineScroll(),rotate(15,1,!0),pageScroll(main),scrollCheck())}function changeBg(){for(var e=0;e<lis.length;e++)lis[e].style.opacity=0;lis[lis.length-pnub].style.opacity=1}function changePages(){for(var e=0;e<pages.length;e++)pages[e].className="status0";pages[pnub-1].className="status1"}function timeOut(){var e=setTimeout(function(){pageOff=!0,clearTimeout(e)},1e3)}var oneTimer=null,nub=0,num=0,main=document.getElementById("main"),headerBox=document.getElementById("headerBox"),h1=document.getElementById("h1"),headNav=document.getElementById("headNav"),navLink=headNav.getElementsByTagName("a"),navLine=document.getElementById("navLine"),pageOne=document.getElementById("pageOne"),pageTwo=document.getElementById("pageTwo"),pageAll=document.getElementsByClassName("page-all"),mainOff=!0,mainHeight=document.documentElement.clientHeight,pnub=1,pageOff=!0,changeOff=!0,bgList=document.getElementById("bgList"),lis=bgList.getElementsByTagName("li"),state=document.getElementById("state"),pages=state.children;window.addEventListener("resize",windowResize),function(){for(var e=0,n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,t){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),o=window.setTimeout(function(){n(a+i)},i);return e=a+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();for(var i=0;i<navLink.length;i++)navLink[i].dataset.index=i;addWheel(main,function(e){if(mainOff)if(e){if(mainOff=!1,1==nub)return void addWheel(main,function(e){if(pageOff)if(pageOff=!1,e){if(0==--pnub)return nub--,navLineScroll(),rotate(15,1,!0),void pageScroll(main);changePages(),changeBg(),timeOut()}else{if(5==++pnub)return nub++,navLineScroll(),rotate(15,1,!0),void pageScroll(main);changePages(),changeBg(),timeOut()}});--nub<0?nub=0:rotate(15,1,!0),navLineScroll(),pageScroll(main)}else{if(mainOff=!1,1==nub)return void addWheel(pageTwo,function(e){if(pageOff)if(pageOff=!1,e){if(0==--pnub)return nub--,navLineScroll(),rotate(15,1,!0),void pageScroll(main);changePages(),changeBg(),timeOut()}else{if(5==++pnub)return nub++,navLineScroll(),rotate(15,1,!0),void pageScroll(main);changePages(),changeBg(),timeOut()}});++nub>3?nub=3:rotate(15,1,!0),navLineScroll(),pageScroll(main)}}),headNav.addEventListener("mouseover",navHover),headNav.addEventListener("mouseout",navOut);for(var i=0;i<navLink.length;i++)navLink[i].addEventListener("click",navLinkClick);h1.onclick=function(){0!=nub&&(nub=0,navLineScroll(),rotate(15,1,!0),pageScroll(main),scrollCheck())};var nextBtn=pageTwo.getElementsByClassName("nextBtn")[0];nextBtn.onclick=function(){nub++,navLineScroll(),rotate(15,1,!0),pageScroll(main),scrollCheck()};var off=!0;